<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Participating Bands</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" href="CLASSIC.jpg" type="image/jpeg">
  <meta property="og:title" content="Participating Bands | Kenton Ridge Marching Band Show">
  <meta property="og:description" content="See the list of bands participating in the 25th Annual Kenton Ridge Marching Band Invitational.">
  <meta property="og:image" content="CLASSIC.jpg">
  <meta property="og:type" content="website">
</head>
<body>
  <video autoplay muted loop playsinline id="bg-video" tabindex="-1" aria-hidden="true">
    <source src="Untitled.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>
  <div class="bg-overlay" aria-hidden="true"></div>
  <header>
    <div class="header-flex">
      <img src="CLASSIC.jpg" alt="Kenton Ridge Marching Band Logo" class="site-logo">
      <div class="header-title-group">
        <h1>Participating Bands</h1>
        <p>Who’s joining</p>
      </div>
    </div>
  </header>

  <nav class="main-nav">
    <button class="nav-toggle" aria-label="Open menu" aria-expanded="false" aria-controls="nav-links">
      <span class="nav-toggle-bar"></span>
      <span class="nav-toggle-bar"></span>
      <span class="nav-toggle-bar"></span>
    </button>
    <div class="nav-links" id="nav-links">
      <a href="/">Home</a>
      <a href="/about">About</a>
      <a href="/schedule">Schedule</a>
      <a href="/bands" aria-current="page">Bands</a>
      <a href="/tickets">Tickets</a>
      <a href="/program">Digital Program</a>
      <a href="/concessions">Concessions</a>
      <a href="/contact">Contact</a>
    </div>
  </nav>

  <section>
    <h2>Bands — October 25, 2025</h2>
    <ul class="band-list">
      <li data-band="batavia">Batavia High School</li>
      <li data-band="jonathan-alder">Jonathan Alder High School</li>
      <li data-band="little-miami">Little Miami High School</li>
      <li data-band="northeastern">Northeastern High School</li>
      <li data-band="olentangy-orange">Olentangy Orange High School</li>
      <li data-band="shawnee">Shawnee High School</li>
      <li data-band="southeastern">Southeastern High School</li>
      <li data-band="tri-county-north">Tri-County North High School</li>
      <li data-band="xenia">Xenia High School</li>
      <li data-band="kenton-ridge">Kenton Ridge High School</li>
    </ul>
      <div id="band-info-card" class="band-info-card" style="display:none; position: absolute; margin-top: 80px;">
      <button id="close-band-card" aria-label="Close" class="close-band-card">&times;</button>
      <h3 id="band-card-title"></h3>
      <div class="band-card-section"><strong>Location:</strong> <span id="band-card-location"></span></div>
      <div class="band-card-section"><strong>Director(s):</strong> <span id="band-card-director"></span></div>
      <div class="band-card-section"><strong>Student Leadership:</strong> <span id="band-card-leadership"></span></div>
      <div class="band-card-section"><strong>Bio:</strong>
        <div id="band-card-bio"></div>
      </div>
    </div>
  </section>

  <footer>
    &copy; 2025 Kenton Ridge High School Marching Band
  </footer>
</body>
<script src="hide-concessions-link.js"></script>
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<script>
// Show a visible error message in the card
function showBandError(msg) {
  document.getElementById('band-card-title').textContent = 'Error';
  document.getElementById('band-card-location').textContent = '';
  document.getElementById('band-card-director').textContent = '';
  document.getElementById('band-card-leadership').textContent = '';
  document.getElementById('band-card-bio').textContent = msg;
  document.getElementById('band-info-card').style.display = 'block';
}
// Load band info from CSV using PapaParse
let bandInfoArr = [];
let bandInfoMap = {};
Papa.parse('./bands-data.csv', {
  header: true,
  download: true,
  complete: function(results) {
    if (!results.data || !Array.isArray(results.data) || results.data.length === 0) {
      console.error('Band CSV failed to load or is empty:', results);
      showBandError('Band data could not be loaded.');
      return;
    }
    bandInfoArr = results.data;
    // Map by normalized name for fast lookup, trimming whitespace
    bandInfoArr.forEach(band => {
      if (!band.name) return;
      // Normalize: lowercase, trim, replace non-alphanum with dash, collapse dashes
      const key = (band.name||'').trim().toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)/g, '');
      bandInfoMap[key] = {
        ...band,
        name: (band.name||'').trim(),
        location: (band.location||'').trim(),
        director: (band.director||'').trim(),
        leadership: (band.leadership||'').trim(),
        bio: (band.bio||'').trim()
      };
    });
    // Enable interactivity after data loads
    document.querySelectorAll('.band-list li').forEach(li => {
      li.tabIndex = 0;
      li.setAttribute('role', 'button');
      li.setAttribute('aria-pressed', 'false');
      li.addEventListener('click', function() {
        // Use the displayed text as the lookup key, normalized
        const bandText = li.textContent.trim();
        const bandKey = bandText.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)/g, '');
        const info = bandInfoMap[bandKey];
        if (info) {
          document.getElementById('band-card-title').textContent = info.name;
          document.getElementById('band-card-location').textContent = info.location;
          document.getElementById('band-card-director').textContent = info.director;
          document.getElementById('band-card-leadership').textContent = info.leadership;
          document.getElementById('band-card-bio').textContent = info.bio;
          document.getElementById('band-info-card').style.display = 'block';
          setTimeout(() => document.getElementById('band-info-card').focus(), 10);
        } else {
          showBandError('No info found for this band.');
          console.warn('No band info found for key:', bandKey);
        }
      });
      li.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' || e.key === ' ') {
          li.click();
        }
      });
    });
  },
  error: function(err) {
    console.error('PapaParse error:', err);
    showBandError('Band data could not be loaded.');
  }
});

// Show a visible error message in the card
function showBandError(msg) {
  document.getElementById('band-card-title').textContent = 'Error';
  document.getElementById('band-card-location').textContent = '';
  document.getElementById('band-card-director').textContent = '';
  document.getElementById('band-card-leadership').textContent = '';
  document.getElementById('band-card-bio').textContent = msg;
  document.getElementById('band-info-card').style.display = 'block';
}
// Close card
document.getElementById('close-band-card').addEventListener('click', function() {
  document.getElementById('band-info-card').style.display = 'none';
});
// Optional: close card when clicking outside
document.addEventListener('click', function(e) {
  const card = document.getElementById('band-info-card');
  if (card.style.display === 'block' && !card.contains(e.target) && !e.target.matches('.band-list li')) {
    card.style.display = 'none';
  }
});
// Hamburger menu toggle for mobile nav
const navToggle = document.querySelector('.nav-toggle');
const navLinks = document.getElementById('nav-links');
if (navToggle && navLinks) {
  navToggle.addEventListener('click', function() {
    const expanded = navToggle.getAttribute('aria-expanded') === 'true';
    navToggle.setAttribute('aria-expanded', !expanded);
    navLinks.classList.toggle('open');
  });
}
</script>
</html>
